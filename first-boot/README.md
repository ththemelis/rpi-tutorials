# Πρώτη εκκίνηση

Παρακάτω θα δούμε μερικές βασικές ενέργειες που κάνουμε μετά την πρώτη εκκίνηση, με σκοπό να αναβαθμίσουμε τα πακέτα λογισμικού και να αυξήσουμε την ασφάλεια του Raspberry Pi.

## Αλλαγή του κωδικού πρόσβασης για τον χρήστη pi

Επειδή ο κωδικός πρόσβασης σε όλες τις αρχικές εγκαταστάσεις του Raspberry Pi είναι ίδιος, θα πρέπει να τον αλλάξουμε. Για να αλλάξουμε τον κωδικό του χρήστη pi, θα χρησιμοποιήσουμε το εργαλείο **raspi-config**. Επειδή το συγκεκριμένο εργαλείο (όπως και όλες τις εντολές που αφορούν στην διαχείριση του συστήματος) μπορεί να το εκτελέσει μόνο ο διαχειριστής (root), θα πρέπει να εισάγουμε την εντολή **sudo** πριν από την κλήση του εργαλείου raspi-config.
***Η εντολή **sudo** χρησιμοποιείται στην περίπτωση που, σαν απλοί χρήστες, θέλουμε να εκτελέσουμε μια εντολή με δικαιώματα διαχειριστή.***
Περισσότερες πληροφορίες για την εντολή **sudo** (<https://el.wikipedia.org/wiki/Sudo> - <https://www.raspberrypi.org/documentation/linux/usage/root.md>)

`sudo raspi-config`

Αφού εισάγουμε τον κωδικό πρόσβασης, θα ανοίξει το εργαλείο ρυθμίσεων με την παρακάτω εικόνα.

<p align="center">
    <img src="images/raspi-config.png" alt="Το περιβάλλον του raspi-config" />
</p>

Επιλέγουμε διαδοχικά **System Options** και **Password**. Εισάγουμε τον κωδικό πρόσβασης δύο φορές (η δεύτερη για επιβεβαίωση). **Σημείωση:** Κατά την πληκρολόγηση του κωδικού πρόσβασης δεν εμφανίζεται κανένας χαρακτήρας.

Η αλλαγή του κωδικού πρόσβασης μπορεί να γίνει πιο εύκολα εισάγοντας την παρακάτω εντολή:

`sudo passwd`

## Δημιουργία χρήστη

## Τοπικές ρυθμίσεις

Μέσω του εργαλείου **raspi-config** θα ρυθμίσουμε το Raspberry Pi έτσι ώστε να αναγνωρίζει τους ελληνικούς χαρακτήρες, θα αλλάξουμε την διάταξη του πληκτρολογίου και θα ρυθμίσουμε την ζώνη ώρας.

<p align="center">
    <img src="images/raspi-config-locale.png" alt="Τοπικές ρυθμίσεις" />
</p>

1. Για την ορισμό της κωδικοποίησης των χαρακτήρων, γράφουμε στην κονσόλα `sudo raspi-config` επιλέγοντας αρχικά **Localisation Options** και στη συνέχεια **Locale**. Από την λίστα, επιλέγουμε το **el_GR.UTF-8 UTF-8** και το **en_US.UTF-8 UTF-8** και αποεπιλέγουμε το **en_GB.UTF-8 UTF-8**. Στο επόμενο βήμα, επιλέγουμε το **el_GR.UTF-8 UTF-8** έτσι ώστε να ορίσουμε τα ελληνικά σαν προεπιλογή στο λειτουργικό σύστημα. Μετά το τέλος της διαδικασίας, επιστρέφουμε στην αρχική οθόνη του raspi-config.

2. Για την αλλαγή της ζώνης ώρας, αφού έχουμε ανοιχτό το εργαλείο **raspi-config**, επιλέγουμε **Localisation Options** και στη συνέχεια **Timezone**. Στη συνέχεια επιλέγουμε διαδοχικά **Europe** και **Athens**.

3. Για την διάταξη του πληκτρολογίου, αφού έχουμε ανοιχτό το εργαλείο **raspi-config**, επιλέγουμε **Localisation Options** και στη συνέχεια **Keyboard**. Στη συνέχεια επιλέγουμε **Generic 105-key PC (intl)** και **Other**. Ακολούθως, επιλέγουμε **English (US)**, **Other**, **The default for the keyboard layout** και τέλος **No compose key**. Αλλάζουμε την διάταξη του πληκτρολογίου από Βρετανικό σε Αμερικάνικο, γιατί η Βρετανική διάταξη έχει σε διαφορετική θέση, από την συνηθισμένη, κάποιους χαρακτήρες.

## Ενεργοποίηση του συγχρονισμού ώρας

Για την ενεργοποίηση του συγχρονισμού της ώρας του συστήματός μας, θα αλλάξουμε τον διακομιστή συγχρονισμού, στο αρχείο **/etc/systemd/timesyncd.conf**. Γράφουμε την παρακάτω εντολή:

`sudo nano /etc/systemd/timesyncd.conf`

**Σημείωση**. Η εντολή **sudo** χρειάζεται, γιατί οι αλλαγές που θα κάνουμε αφορούν αρχείο του συστήματος και για αυτήν την εργασία απαιτούνται δικαιώματα διαχειριστή. Η δεύτερη εντολή **nano** είναι ένας επεξεργαστής κειμένου. Τροποποιούμε το αρχείο σύμφωνα με την παρακάτω εικόνα.

Αποθηκεύουμε πατώντας **Ctrl+O** και βγαίνουμε από το nano πατώντας **Ctrl+X**.

<p align="center">
    <img src="images/time-sync.png" alt="Τροποποίηση διακομιστή συγχρονισμού ώρας" />
</p>

Για να εφαρμοστούν οι αλλαγές, θα πρέπει να επανεκκινήσουμε την υπηρεσία συγχρονισμού ώρας, γράφοντας την παρακάτω εντολή:

`sudo systemctl restart systemd-timesyncd.service`

## Ενημέρωση του λειτουργικού συστήματος

Για την αναβάθμιση του συστήματος, θα χρησιμοποιήσουμε την εντολή **apt**. Πιο συγκεκριμένα, πρώτα θα πρέπει να ενημερώσουμε την λίστα των πακέτων λογισμικού γράφοντας:

`sudo apt update`

<p align="center">
    <img src="images/apt-update.png" alt="Ενημέρωση των πακέτων λογισμικού" />
</p>

Μετά την ενημέρωση της λίστας των πακέτων, αν υπάρχουν αναβαθμίσεις, μπορούμε να προχωρήσουμε σε αναβάθμιση με την εντολή:

`sudo apt upgrade -y`

<p align="center">
    <img src="images/apt-upgrade.png" alt="Αναβάθμιση πακέτων λογισμικού" />
</p>

**Σημείωση**. Με την παράμετρο **-y** δηλώνουμε προκαταβολικά ότι αποδεχόμαστε τις αλλαγές που θα κάνει η εκτέλεση της εντολής **apt upgrade**.

## Εγκατάσταση και ενεργοποίηση τοίχους προστασίας

Από την στιγμή που το Raspberry Pi θα είναι προσβάσιμο από όλους στο διαδίκτυο, θα πρέπει να εγκαταστήσουμε ένα τοίχος προστασίας έτσι ώστε να μειώσουμε τον κίνδυνο κάποιας εισβολής. Για αυτόν τον λόγο θα εγκαταστήσουμε ένα τοίχος προστασίας, το οποίο θα επιτρέπει την πρόσβαση μόνο σε συγκεκριμένες υπηρεσίες. Γράφουμε την παρακάτω εντολή:

`sudo apt install ufw`

Για να επιτρέψουμε τη σύνδεση μέσω SSH, θα πρέπει να ανοίξουμε την πόρτα 22 στο τοίχος προστασίας.

`sudo ufw allow 22`

Τέλος, θα πρέπει να ενεργοποιήσουμε το τοίχος προστασίας.

`sudo ufw enable`

Πλέον, επιτρέπουμε να γίνονται συνδέσεις προς την πόρτα 22 του Raspberry Pi από οποιαδήποτε διεύθυνση.

## Ορισμός στατικής διεύθυνσης ΙΡ

Στο τοπικό δίκτυο του σχολείου, ο δρομολογητής - modem είναι υπεύθυνος για την απόδοση διευθύνσεων ΙΡ στο σύνολο των υπολογιστών, κάνοντας χρήση του πρωτοκόλλου DHCP. Το DHCP αποδίδει διευθύνσεις ΙΡ δυναμικά, κάτι που σημαίνει ότι κάθε ένας υπολογιστής από τη στιγμή που ανοίξει θα πάρει μια διεύθυνση ΙΡ, η οποία μπορεί να είναι διαφορετική από αυτήν που είχε την προηγούμενη φορά (ανάλογα με τις ρυθμίσεις του δρομολογητή). Εμείς θέλουμε το Raspberry Pi να παίρνει πάντα την ίδια διεύθυνση ΙΡ και για αυτό θα κάνουμε τις παρακάτω ενέργειες:

1. Σύνδεση στο διαχειριστικό περιβάλλον του δρομολογητή - modem. Την διεύθυνση σύνδεσης, καθώς και τα στοιχεία σύνδεσης θα τα βρούμε στο κάτω μέρος της συσκευής.

<p align="center">
    <img src="images/speedport1.png" alt="Σύνδεση στο περιβάλλον διαχείρισης του δρομολογητή" />
</p>

2. Αφού συνδεθούμε, πατάμε αρχικά το κουμπάκι **Home network** (βρίσκεται στην κορυφή της σελίδας), στη συνέχεια πατάμε στον σύνδεσμο **Home Network (LAN)** (βρίσκεται στο αριστερό τμήμα της σελίδας) και τέλος πατάμε τον σύνδεσμο **DHCP**. Από αυτό το σημείο θα ορίσουμε το εύρος διευθύνσεων που θα χρησιμοποιεί η υπηρεσία DHCP έτσι ώστε να εξαιρέσουμε κάποιες διευθύνσεις. Στην εικόνα μπορούμε να παρατηρήσουμε ότι η υπηρεσία DHCP μπορεί να χρησιμοποιήσει τις διευθύνσεις από 192.168.1.30 μέχρι 192.168.1.220. Τις υπόλοιπες διευθύνσεις μπορούμε να τις χρησιμοποιήσουμε εμείς για να τις αποδώσουμε στατικά σε δικτυακές συσκευές.

<p align="center">
    <img src="images/speedport2.png" alt="Σύνδεση στο περιβάλλον διαχείρισης του δρομολογητή" />
</p>

3. Για τον ορισμό μιας εσωτερικής στατικής διεύθυνσης ΙΡ στο Raspberry Pi, θα τροποποιήσουμε ένα αρχείο ρυθμίσεων. Γράφουμε λοιπόν, `sudo nano /etc/dhcpcd.conf` και τροποποιούμε το περιεχόμενο του αρχείου σύμφωνα με την παρακάτω εικόνα. 
<p align="center">
    <img src="images/dhcpcd.png" alt="Απόδοση στατικής διεύθυνσης ΙΡ" />
</p> Μετά από επανεκκίνηση, το Raspberry Pi θα παίρνει πάντα την συγκεκριμένη διεύθυνση IP στο εσωτερικό δίκτυο.
